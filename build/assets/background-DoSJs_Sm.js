import{g as a,s as c}from"./utility-Q-9IHOGv.js";async function l(){try{const t=await n("proxy_auth_token");await c("proxy_auth_token",t)}catch(t){console.error("Error getting token from local storage: ",t)}}async function n(){return new Promise((t,e)=>{chrome.cookies.get({url:"https://chat.50agents.com",name:"proxy_auth_token"},function(r){chrome.runtime.lastError?(console.error(chrome.runtime.lastError),e(chrome.runtime.lastError)):t(r==null?void 0:r.value)})})}async function s(){await a("proxy_auth_token")||(console.log("No token found in local storage"),l())}chrome.runtime.onInstalled.addListener(()=>{console.log("Extension Installed!!"),s()});chrome.runtime.onMessage.addListener(function(t,e,r){console.log(e.tab?"from a content script:"+e.tab.url:"from the extension");try{switch(t.type){case"get-token":n("proxy_auth_token").then(o=>{r({token:o})}).catch(o=>{r({error:o})});break;case"get-storage":chrome.storage.local.get(t.keys,o=>{r(o)});break;default:r({error:"Invalid request"})}}catch(o){console.error("Error handling message:",o),r({error:"Internal error"})}return!0});
