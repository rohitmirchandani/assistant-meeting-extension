import{g as a,s as c}from"./utility-nps1o31z.js";async function s(){try{const r=await n("proxy_auth_token");await c("proxy_auth_token",r)}catch(r){console.error("Error getting token from local storage: ",r)}}async function n(){return new Promise((r,t)=>{chrome.cookies.get({url:"https://chat.walkover.in",name:"proxy_auth_token"},function(o){chrome.runtime.lastError?(console.error(chrome.runtime.lastError),t(chrome.runtime.lastError)):r(o==null?void 0:o.value)})})}async function l(){await a("proxy_auth_token")||(console.log("No token found in local storage"),s())}chrome.runtime.onInstalled.addListener(()=>{console.log("Extension Installed!!"),l()});chrome.runtime.onMessage.addListener(function(r,t,o){console.log(t.tab?"from a content script:"+t.tab.url:"from the extension");try{switch(r.type){case"get-token":n("proxy_auth_token").then(e=>{o({token:e})});break;case"get-storage":chrome.storage.local.get(r.keys,e=>{o(e)});break;default:o({error:"Invalid request"})}}catch(e){console.error("Error handling message:",e),o({error:"Internal error"})}return!0});
